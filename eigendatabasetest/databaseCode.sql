-- MySQL Script generated by MySQL Workbench
-- 05/16/15 10:52:25
-- Model: New Model    Version: 1.0
SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema 
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Table `locatie`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `locatie` (
  `locatienr` INT NOT NULL AUTO_INCREMENT,
  `straat` VARCHAR(50) NOT NULL,
  `huisnummer` VARCHAR(5) NOT NULL,
  `plaats` VARCHAR(25) NOT NULL,
  `postcode` VARCHAR(9) NOT NULL,
  PRIMARY KEY (`locatienr`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `stakeholdertype`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `stakeholdertype` (
  `typeID` INT NOT NULL ,
  `typenaam` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`typeID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `stakeholder`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `stakeholder` (
  `stakeholderID` int(11) NOT NULL AUTO_INCREMENT,
  `type` INT NOT NULL,
  `naam` VARCHAR(30) NOT NULL,
  `achternaam` VARCHAR(30) NULL,
  `emailadres` VARCHAR(40) NOT NULL,
  `telefoonnr` VARCHAR(20) NOT NULL,
  `idkaart` VARCHAR(200) NULL,
  `ovkaart` VARCHAR(200) NULL,
  `krediet` DOUBLE NULL,
  `wachtwoord` VARCHAR(50) NULL,
  `locatie` INT NULL,
  `snelheid` DOUBLE NULL,
  `rekeningnr` VARCHAR(20) NULL,
  PRIMARY KEY (`stakeholderID`),
  INDEX `fk_Stakeholder_Locatie1_idx` (`locatie` ASC),
  INDEX `fk_Stakeholder_StakeholderType1_idx` (`type` ASC),
  CONSTRAINT `fk_Stakeholder_Locatie1`
    FOREIGN KEY (`locatie`)
    REFERENCES `locatie` (`locatienr`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Stakeholder_StakeholderType1`
    FOREIGN KEY (`type`)
    REFERENCES `stakeholdertype` (`typeID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `verzendorder`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `verzendorder` (
  `orderID` INT NOT NULL AUTO_INCREMENT,
  `klantID` INT NOT NULL,
  `aanmeldtijd` DATETIME NOT NULL,
  `definitief` TINYINT(1) NOT NULL,
  `beginlocatie` INT NOT NULL,
  `eindlocatie` INT NOT NULL,
  `afstand` INT NULL,
  PRIMARY KEY (`orderID`),
  INDEX `fk_Order_Stakeholder1_idx` (`klantID` ASC),
  INDEX `fk_verzendorder_locatie1_idx` (`eindlocatie` ASC),
  INDEX `fk_verzendorder_locatie2_idx` (`beginlocatie` ASC),
  UNIQUE INDEX `orderID_UNIQUE` (`orderID` ASC),
  CONSTRAINT `fk_Order_Stakeholder1`
    FOREIGN KEY (`klantID`)
    REFERENCES `stakeholder` (`stakeholderID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_verzendorder_locatie1`
    FOREIGN KEY (`eindlocatie`)
    REFERENCES `locatie` (`locatienr`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_verzendorder_locatie2`
    FOREIGN KEY (`beginlocatie`)
    REFERENCES `locatie` (`locatienr`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pakket`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `pakket` (
  `pakketID` INT NOT NULL AUTO_INCREMENT,
  `gewicht` DOUBLE NOT NULL,
  `formaat` VARCHAR(20) NOT NULL,
  `opmerking` VARCHAR(200) NULL,
  `kosten` DOUBLE NULL,
  `orderID` INT NOT NULL,
  `status` VARCHAR(45) NULL,
  PRIMARY KEY (`pakketID`),
  INDEX `fk_Pakket_Order1_idx` (`orderID` ASC),
  CONSTRAINT `fk_Pakket_Order1`
    FOREIGN KEY (`orderID`)
    REFERENCES `verzendorder` (`orderID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Reis`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `reis` (
  `reisID` INT NOT NULL AUTO_INCREMENT,
  `beginlocatie` INT NOT NULL,
  `eindlocatie` INT NOT NULL,
  `vertrektijd` DATETIME NULL,
  `aankomsttijd` DATETIME NULL,
  `koerierID` INT NOT NULL,
  `weekelijks` TINYINT(1) NULL,
  PRIMARY KEY (`reisID`),
  UNIQUE INDEX `trajectid_UNIQUE` (`reisID` ASC),
  INDEX `fk_voorkeurstraject_stakeholder1_idx` (`koerierID` ASC),
  INDEX `fk_reis_locatie1_idx` (`beginlocatie` ASC),
  INDEX `fk_reis_locatie2_idx` (`eindlocatie` ASC),
  CONSTRAINT `fk_voorkeurstraject_stakeholder1`
    FOREIGN KEY (`koerierID`)
    REFERENCES `stakeholder` (`stakeholderID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Reis_locatie1`
    FOREIGN KEY (`beginlocatie`)
    REFERENCES `locatie` (`locatienr`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Reis_locatie2`
    FOREIGN KEY (`eindlocatie`)
    REFERENCES `locatie` (`locatienr`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `traject`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `traject` (
  `trajectID` INT NOT NULL AUTO_INCREMENT,
  `pakketID` INT NOT NULL,
  `afhaaltijd` DATETIME NULL,
  `aflevertijd` DATETIME NULL,
  `reisID` INT NOT NULL,
  PRIMARY KEY (`trajectID`),
  INDEX `fk_traject_voorkeurstraject1_idx` (`reisID` ASC),
  INDEX `fk_traject_pakket1_idx` (`pakketID` ASC),
  CONSTRAINT `fk_traject_voorkeurstraject1`
    FOREIGN KEY (`reisID`)
    REFERENCES `Reis` (`reisID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_traject_pakket1`
    FOREIGN KEY (`pakketID`)
    REFERENCES `pakket` (`pakketID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `probleem`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `probleem` (
  `probleemID` INT NULL AUTO_INCREMENT,
  `beschrijving` VARCHAR(500) NOT NULL,
  `datum` DATETIME NOT NULL,
  `titel` VARCHAR(45) NOT NULL,
  `afgehandeld` TINYINT(1) NOT NULL,
  `pakketID` INT NULL,
  `trajectID` INT NULL,
  PRIMARY KEY (`probleemID`),
  INDEX `fk_probleem_pakket1_idx` (`pakketID` ASC),
  INDEX `fk_probleem_traject1_idx` (`trajectID` ASC),
  CONSTRAINT `fk_probleem_pakket1`
    FOREIGN KEY (`pakketID`)
    REFERENCES `pakket` (`pakketID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_probleem_traject1`
    FOREIGN KEY (`trajectID`)
    REFERENCES `traject` (`trajectID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `tarief`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `tarief` (
  `koeriersID` INT NOT NULL AUTO_INCREMENT,
  `km` INT NOT NULL,
  `prijs` DOUBLE NOT NULL,
  `extraprijs` DOUBLE NOT NULL,
  PRIMARY KEY (`koeriersID`, `km`),
  CONSTRAINT `fk_Tarief_Stakeholder1`
    FOREIGN KEY (`koeriersID`)
    REFERENCES `stakeholder` (`stakeholderID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `kredietomzetting`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `kredietomzetting` (
  `treinkoerier` INT NOT NULL AUTO_INCREMENT,
  `datum` DATETIME NOT NULL,
  `bedrag` DOUBLE NOT NULL,
  `isafgehandeld` TINYINT(1) NULL,
  `type` VARCHAR(10) NOT NULL,
  PRIMARY KEY (`treinkoerier`, `datum`),
  CONSTRAINT `fk_KredietOmzetting_Stakeholder1`
    FOREIGN KEY (`treinkoerier`)
    REFERENCES `stakeholder` (`stakeholderID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

INSERT INTO `locatie` (`locatienr`, `straat`, `huisnummer`, `plaats`, `postcode`) VALUES
(1, 'Stationsweg', '5B', 'Zwolle', '1234AB'),
(50, 'pOEPWEG', '4', 'Nunspeet', '8071 SN'),
(55, 'van der laenstraat', '15', 'Zwolle', '8012TA');

INSERT INTO `stakeholdertype` (`typeID`, `typenaam`) VALUES
(1, 'gebruiker'),
(2, 'geverifieerd'),
(3, 'ontvanger');

INSERT INTO `stakeholder` (`stakeholderID`, `type`, `naam`, `achternaam`, `emailadres`, `telefoonnr`, `idkaart`, `ovkaart`, `krediet`, `wachtwoord`, `locatie`, `snelheid`, `rekeningnr`) VALUES
(1, 2, 'Test', 'Tester', 'test', '636546686', 'link naar IDkaartscan', 'link naar OVscan', 1337, 'a94a8fe5ccb19ba61c4c0873d391e987982fbbd3', 1, NULL, 'NL99 INGB 123456789'),
(4, 1, 'Kars', 'Barendrecht', 'kars-93@hotmail.com', '0618884901', NULL, NULL, NULL,  'f39e7a7a9b170335306b711135df17b698d1c27a', 1, NULL, NULL),
(6, 1, 'Michiel', 'Janssen', 'michielmetmij@hotmail.com', '0681106418', NULL, NULL, NULL,  '37923c8fa86bed47abdba1417c052cf9b8368753', 1, NULL, NULL),
(17, 1, 'Twan', 'van Gelder', 'TNvGelder@gmail.com', '023423423', NULL, NULL, NULL, '40bd001563085fc35165329ea1ff5c5ecbdbbeef', 1, NULL, NULL),
(19, 1, 'Jasper', 'Folkertsma', 'jasperfolkertsma@gmail.com', '06-123456', NULL, NULL, NULL, 'd9ff1b0937787f14be61bd7b7fa1506bd57c32c1', 1, NULL, NULL),
(43, 1, 'Youri Jan Gerrit', 'van Dorp', 'yourivandorp@gmail.com', '0613052882', NULL, NULL, NULL, 'c2068385fc236200d7604b9a92ae0e124f52ae43', 50, NULL, NULL),
(48, 1, 'Edwin', 'van Halem', 'edwinvanhalem@gmail.com', '0629532920', NULL, NULL, NULL, '25c57b0ee911ae516903bb6c1cf638441b77cdd4', 55, NULL, NULL);

INSERT INTO `verzendorder` (`orderID`, `klantID`, `aanmeldtijd`, `definitief`,`beginlocatie`,`eindlocatie`) VALUES
(1, 1, '2015-05-12 18:32:14', true, 1, 50);

INSERT INTO `pakket` (`pakketID`, `gewicht`, `formaat`, `opmerking`, `kosten`, `orderID`) VALUES
(1, 200, '20x20x13', 'Breekbaar', 2, 1),
(2, 300, '20x20x13', 'Zwaar', 2, 1);

